(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2544:function(e,t,n){Promise.resolve().then(n.bind(n,1252))},1252:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s=n(7437),r=n(2265),i=n(8714),u=n(9509),o=n(7907),a=n(5250),l=n.n(a),c=n(1326);function d(){let[e,t]=(0,r.useState)(null),n=(0,o.useRouter)();(0,r.useEffect)(()=>{c.Z.auth.getSession().then(e=>{let{data:{session:n}}=e;return t(n)});let{data:e}=c.Z.auth.onAuthStateChange((e,n)=>{t(n)});return()=>{e.subscription.unsubscribe()}},[]);let i=async()=>{await c.Z.auth.signOut(),n.replace("/")};return(0,s.jsxs)("nav",{className:"bg-white shadow p-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsx)(l(),{href:"/",children:(0,s.jsx)("a",{className:"text-xl font-bold",children:"AiForgePro"})}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{href:"/generate",children:(0,s.jsx)("a",{className:"hover:underline",children:"Generate"})}),(0,s.jsx)(l(),{href:"/library",children:(0,s.jsx)("a",{className:"hover:underline",children:"Library"})}),(0,s.jsx)(l(),{href:"/pricing",children:(0,s.jsx)("a",{className:"hover:underline",children:"Buy Credits"})})]})]}),(0,s.jsx)("div",{className:"space-x-4",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-700",children:e.user.email}),(0,s.jsx)("button",{onClick:i,className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Sign Out"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{href:"/auth/login",children:(0,s.jsx)("a",{className:"text-blue-600 hover:underline",children:"Log In"})}),(0,s.jsx)(l(),{href:"/auth/signup",children:(0,s.jsx)("a",{className:"text-green-600 hover:underline",children:"Sign Up"})})]})})]})}function h(e){let{children:t}=e,[n]=(0,r.useState)(()=>(0,i.createPagesBrowserClient)());return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:"bg-gray-50 min-h-screen",children:(0,s.jsxs)(u.SessionContextProvider,{supabaseClient:n,children:[(0,s.jsx)(d,{}),t]})})})}},9509:function(e,t,n){"use strict";var s=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,o=(e,t,n)=>new Promise((s,r)=>{var i=e=>{try{o(n.next(e))}catch(e){r(e)}},u=e=>{try{o(n.throw(e))}catch(e){r(e)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,u);o((n=n.apply(e,t)).next())}),a={};((e,t)=>{for(var n in t)s(e,n,{get:t[n],enumerable:!0})})(a,{SessionContextProvider:()=>h,useSession:()=>b,useSessionContext:()=>x,useSupabaseClient:()=>f,useUser:()=>v}),e.exports=((e,t,n,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))u.call(e,n)||void 0===n||s(e,n,{get:()=>t[n],enumerable:!(o=r(t,n))||o.enumerable});return e})(s({},"__esModule",{value:!0}),a);var l=n(2265),c=n(7437),d=(0,l.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),h=({supabaseClient:e,initialSession:t=null,children:n})=>{let[s,r]=(0,l.useState)(t),[i,u]=(0,l.useState)(!t),[a,h]=(0,l.useState)();(0,l.useEffect)(()=>{!s&&t&&r(t)},[s,t]),(0,l.useEffect)(()=>{let t=!0;return function(){o(this,null,function*(){let{data:{session:n},error:s}=yield e.auth.getSession();if(t){if(s){h(s),u(!1);return}r(n),u(!1)}})}(),()=>{t=!1}},[]),(0,l.useEffect)(()=>{let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{t&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&r(t),"SIGNED_OUT"===e&&r(null)});return()=>{t.unsubscribe()}},[]);let x=(0,l.useMemo)(()=>i?{isLoading:!0,session:null,error:null,supabaseClient:e}:a?{isLoading:!1,session:null,error:a,supabaseClient:e}:{isLoading:!1,session:s,error:null,supabaseClient:e},[i,s,a]);return(0,c.jsx)(d.Provider,{value:x,children:n})},x=()=>{let e=(0,l.useContext)(d);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function f(){let e=(0,l.useContext)(d);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var b=()=>{let e=(0,l.useContext)(d);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},v=()=>{var e,t;let n=(0,l.useContext)(d);if(void 0===n)throw Error("useUser must be used within a SessionContextProvider.");return null!=(t=null==(e=n.session)?void 0:e.user)?t:null}},1326:function(e,t,n){"use strict";let s=(0,n(8714).createClientComponentClient)();t.Z=s}},function(e){e.O(0,[785,250,971,69,744],function(){return e(e.s=2544)}),_N_E=e.O()}]);